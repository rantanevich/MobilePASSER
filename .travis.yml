language: python
jobs:
  include:
  - name: Python 3.8 on Linux
    python: 3.8
  - name: Python 3.6.1 on Linux
    python: 3.6.1
  - name: Python 3.8 on Windows
    os: windows
    language: shell
    before_install:
      - choco install python --version 3.8.5
      - python --version
      - python -m pip install --upgrade pip
    env: PATH=/c/Python38:/c/Python38/Scripts:$PATH
  - name: Python 3.6.1 on Windows
    os: windows
    language: shell
    before_install:
      - choco install python --version 3.6.1
      - python --version
      - python -m pip install --upgrade pip
    env: PATH=/c/Python36:/c/Python36/Scripts:$PATH
install:
  - pip3 install --upgrade pip
  - pip3 install flake8
script:
  - flake8
  - python -m unittest tests.test_mobilepass
deploy:
  provider: pypi
  username: __token__
  password:
    secure: Qu8QDgiFPTzRD9+NbDPm6/vTzFC9HwJUZozQkXMk+TqQEWlh7TTJf8azyCQ0TwpHxDUyRwby2cOHVFe7hRi9rNp/AmYjep6bOOG0VriWzlM20OoC6OfbQ/3a/Qz6iajZBfocGBs+98ii7f6RjCA5wHpBE7PGJjHxJlh3sdDtCnS5KMtklUAFv3gtdjF7tn1hxsa0C4q7MST4Uz0PA6l/j9fKp/LybR7xDvrFP3MHE3JnYRl6I1z6TineqBT9I2TIXXUcDafuaZxpzgJnNiSC/IcoNET24FmeUIbduJs1pZmIjgNHOPeuvmz/S33Q4lMYEzkFSDHo6St3UUlr8fyUb3S49rHrNwVdDt91ium6TsyJSl1c13J16Gj4N0v12lcHLNb3QUcSdY6a4NVIru7LctYL2IxX2K8JP/490aB9+0gWCPC6MZbBK+NJ2eKfagy/tYKQ3HmbJWgQhz+mhoBsLK4bqi+fxby30NepFyh4wotIQ0Ea7lwHpuJJ0jINcgvmLLKkU1E1CS3c8oaHwLWJE/S3B7jHGTO93Sz6eb7SHnJCqwts8SPD8DrNM3kVkitzkG2aiLQeqe5dGVPdFGWGc/F/PAADw4MRHYPaj1agIGqhVA1Kw1QMqtA11KMrhBTeQjclA434QggRb1cZZCi3yXZyGjlXbR5ZZmWvEAGaoUo=
  on:
    tags: true
    branch: python
